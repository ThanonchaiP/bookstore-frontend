import{r as c,j as s,n as K,u as Q}from"./index-eb84028e.js";import{p as h,A as U,G as Z,E as $,k as q,J as ee,u as Y}from"./useTranslation-ad94cc8a.js";import{f as L}from"./favourite-icon-36471d21.js";import{h as te,g as se}from"./review.sevice-3e142ee6.js";import{c as ae}from"./product.service-d0b1bec2.js";import{u as ne,b as G,t as ie,j as I,h as le,i as oe,e as W}from"./configureStore-ecfb3473.js";import{n as re,o as M,A as ce}from"./ConfirmDialog-246d4833.js";import"./index.esm-81e7d11a.js";import"./index-7f3b26ed.js";import"./react-toastify.esm-b4929cd0.js";import"./index-4ca9e7fe.js";import"./user.service-353ea3b1.js";import"./index-67567b47.js";import"./auth.service-10d56dee.js";const de=e=>{const{prefixCls:t,className:a,style:i,size:n,shape:r}=e,l=h({[`${t}-lg`]:n==="large",[`${t}-sm`]:n==="small"}),o=h({[`${t}-circle`]:r==="circle",[`${t}-square`]:r==="square",[`${t}-round`]:r==="round"}),d=c.useMemo(()=>typeof n=="number"?{width:n,height:n,lineHeight:`${n}px`}:{},[n]);return c.createElement("span",{className:h(t,l,o,a),style:Object.assign(Object.assign({},d),i)})},E=de,me=new re("ant-skeleton-loading",{"0%":{transform:"translateX(-37.5%)"},"100%":{transform:"translateX(37.5%)"}}),P=e=>({height:e,lineHeight:`${e}px`}),j=e=>Object.assign({width:e},P(e)),ue=e=>({position:"relative",zIndex:0,overflow:"hidden",background:"transparent","&::after":{position:"absolute",top:0,insetInlineEnd:"-150%",bottom:0,insetInlineStart:"-150%",background:e.skeletonLoadingBackground,animationName:me,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite",content:'""'}}),R=e=>Object.assign({width:e*5,minWidth:e*5},P(e)),ge=e=>{const{skeletonAvatarCls:t,color:a,controlHeight:i,controlHeightLG:n,controlHeightSM:r}=e;return{[`${t}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:a},j(i)),[`${t}${t}-circle`]:{borderRadius:"50%"},[`${t}${t}-lg`]:Object.assign({},j(n)),[`${t}${t}-sm`]:Object.assign({},j(r))}},he=e=>{const{controlHeight:t,borderRadiusSM:a,skeletonInputCls:i,controlHeightLG:n,controlHeightSM:r,color:l}=e;return{[`${i}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:l,borderRadius:a},R(t)),[`${i}-lg`]:Object.assign({},R(n)),[`${i}-sm`]:Object.assign({},R(r))}},X=e=>Object.assign({width:e},P(e)),pe=e=>{const{skeletonImageCls:t,imageSizeBase:a,color:i,borderRadiusSM:n}=e;return{[`${t}`]:Object.assign(Object.assign({display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",background:i,borderRadius:n},X(a*2)),{[`${t}-path`]:{fill:"#bfbfbf"},[`${t}-svg`]:Object.assign(Object.assign({},X(a)),{maxWidth:a*4,maxHeight:a*4}),[`${t}-svg${t}-svg-circle`]:{borderRadius:"50%"}}),[`${t}${t}-circle`]:{borderRadius:"50%"}}},A=(e,t,a)=>{const{skeletonButtonCls:i}=e;return{[`${a}${i}-circle`]:{width:t,minWidth:t,borderRadius:"50%"},[`${a}${i}-round`]:{borderRadius:t}}},B=e=>Object.assign({width:e*2,minWidth:e*2},P(e)),fe=e=>{const{borderRadiusSM:t,skeletonButtonCls:a,controlHeight:i,controlHeightLG:n,controlHeightSM:r,color:l}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[`${a}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:l,borderRadius:t,width:i*2,minWidth:i*2},B(i))},A(e,i,a)),{[`${a}-lg`]:Object.assign({},B(n))}),A(e,n,`${a}-lg`)),{[`${a}-sm`]:Object.assign({},B(r))}),A(e,r,`${a}-sm`))},xe=e=>{const{componentCls:t,skeletonAvatarCls:a,skeletonTitleCls:i,skeletonParagraphCls:n,skeletonButtonCls:r,skeletonInputCls:l,skeletonImageCls:o,controlHeight:d,controlHeightLG:m,controlHeightSM:u,color:p,padding:k,marginSM:f,borderRadius:C,skeletonTitleHeight:S,skeletonBlockRadius:x,skeletonParagraphLineHeight:v,controlHeightXS:b,skeletonParagraphMarginTop:_}=e;return{[`${t}`]:{display:"table",width:"100%",[`${t}-header`]:{display:"table-cell",paddingInlineEnd:k,verticalAlign:"top",[`${a}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:p},j(d)),[`${a}-circle`]:{borderRadius:"50%"},[`${a}-lg`]:Object.assign({},j(m)),[`${a}-sm`]:Object.assign({},j(u))},[`${t}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[`${i}`]:{width:"100%",height:S,background:p,borderRadius:x,[`+ ${n}`]:{marginBlockStart:u}},[`${n}`]:{padding:0,"> li":{width:"100%",height:v,listStyle:"none",background:p,borderRadius:x,"+ li":{marginBlockStart:b}}},[`${n}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${t}-content`]:{[`${i}, ${n} > li`]:{borderRadius:C}}},[`${t}-with-avatar ${t}-content`]:{[`${i}`]:{marginBlockStart:f,[`+ ${n}`]:{marginBlockStart:_}}},[`${t}${t}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},fe(e)),ge(e)),he(e)),pe(e)),[`${t}${t}-block`]:{width:"100%",[`${r}`]:{width:"100%"},[`${l}`]:{width:"100%"}},[`${t}${t}-active`]:{[`
        ${i},
        ${n} > li,
        ${a},
        ${r},
        ${l},
        ${o}
      `]:Object.assign({},ue(e))}}},N=U("Skeleton",e=>{const{componentCls:t}=e,a=Z(e,{skeletonAvatarCls:`${t}-avatar`,skeletonTitleCls:`${t}-title`,skeletonParagraphCls:`${t}-paragraph`,skeletonButtonCls:`${t}-button`,skeletonInputCls:`${t}-input`,skeletonImageCls:`${t}-image`,imageSizeBase:e.controlHeight*1.5,skeletonTitleHeight:e.controlHeight/2,skeletonBlockRadius:e.borderRadiusSM,skeletonParagraphLineHeight:e.controlHeight/2,skeletonParagraphMarginTop:e.marginLG+e.marginXXS,borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.color} 25%, ${e.colorGradientEnd} 37%, ${e.color} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[xe(a)]},e=>{const{colorFillContent:t,colorFill:a}=e;return{color:t,colorGradientEnd:a}}),ve=e=>{const{prefixCls:t,className:a,active:i,shape:n="circle",size:r="default"}=e,{getPrefixCls:l}=c.useContext($),o=l("skeleton",t),[d,m]=N(o),u=M(e,["prefixCls","className"]),p=h(o,`${o}-element`,{[`${o}-active`]:i},a,m);return d(c.createElement("div",{className:p},c.createElement(E,Object.assign({prefixCls:`${o}-avatar`,shape:n,size:r},u))))},be=ve,je=e=>{const{prefixCls:t,className:a,active:i,block:n=!1,size:r="default"}=e,{getPrefixCls:l}=c.useContext($),o=l("skeleton",t),[d,m]=N(o),u=M(e,["prefixCls"]),p=h(o,`${o}-element`,{[`${o}-active`]:i,[`${o}-block`]:n},a,m);return d(c.createElement("div",{className:p},c.createElement(E,Object.assign({prefixCls:`${o}-button`,size:r},u))))},$e=je;var Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM288 604a64 64 0 10128 0 64 64 0 10-128 0zm118-224a48 48 0 1096 0 48 48 0 10-96 0zm158 228a96 96 0 10192 0 96 96 0 10-192 0zm148-314a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"dot-chart",theme:"outlined"};const we=Ne;var V=function(t,a){return c.createElement(ce,q(q({},t),{},{ref:a,icon:we}))};V.displayName="DotChartOutlined";const ke=c.forwardRef(V),Ce=e=>{const{prefixCls:t,className:a,style:i,active:n,children:r}=e,{getPrefixCls:l}=c.useContext($),o=l("skeleton",t),[d,m]=N(o),u=h(o,`${o}-element`,{[`${o}-active`]:n},m,a),p=r??c.createElement(ke,null);return d(c.createElement("div",{className:u},c.createElement("div",{className:h(`${o}-image`,a),style:i},p)))},Se=Ce,_e="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",ye=e=>{const{prefixCls:t,className:a,style:i,active:n}=e,{getPrefixCls:r}=c.useContext($),l=r("skeleton",t),[o,d]=N(l),m=h(l,`${l}-element`,{[`${l}-active`]:n},a,d);return o(c.createElement("div",{className:m},c.createElement("div",{className:h(`${l}-image`,a),style:i},c.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${l}-image-svg`},c.createElement("path",{d:_e,className:`${l}-image-path`})))))},Oe=ye,Ee=e=>{const{prefixCls:t,className:a,active:i,block:n,size:r="default"}=e,{getPrefixCls:l}=c.useContext($),o=l("skeleton",t),[d,m]=N(o),u=M(e,["prefixCls"]),p=h(o,`${o}-element`,{[`${o}-active`]:i,[`${o}-block`]:n},a,m);return d(c.createElement("div",{className:p},c.createElement(E,Object.assign({prefixCls:`${o}-input`,size:r},u))))},Pe=Ee,De=e=>{const t=o=>{const{width:d,rows:m=2}=e;if(Array.isArray(d))return d[o];if(m-1===o)return d},{prefixCls:a,className:i,style:n,rows:r}=e,l=ee(Array(r)).map((o,d)=>c.createElement("li",{key:d,style:{width:t(d)}}));return c.createElement("ul",{className:h(a,i),style:n},l)},Ie=De,Re=e=>{let{prefixCls:t,className:a,width:i,style:n}=e;return c.createElement("h3",{className:h(t,a),style:Object.assign({width:i},n)})},Ae=Re;function z(e){return e&&typeof e=="object"?e:{}}function Be(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function ze(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}function He(e,t){const a={};return(!e||!t)&&(a.width="61%"),!e&&t?a.rows=3:a.rows=2,a}const w=e=>{const{prefixCls:t,loading:a,className:i,style:n,children:r,avatar:l=!1,title:o=!0,paragraph:d=!0,active:m,round:u}=e,{getPrefixCls:p,direction:k}=c.useContext($),f=p("skeleton",t),[C,S]=N(f);if(a||!("loading"in e)){const x=!!l,v=!!o,b=!!d;let _;if(x){const y=Object.assign(Object.assign({prefixCls:`${f}-avatar`},Be(v,b)),z(l));_=c.createElement("div",{className:`${f}-header`},c.createElement(E,Object.assign({},y)))}let T;if(v||b){let y;if(v){const D=Object.assign(Object.assign({prefixCls:`${f}-title`},ze(x,b)),z(o));y=c.createElement(Ae,Object.assign({},D))}let F;if(b){const D=Object.assign(Object.assign({prefixCls:`${f}-paragraph`},He(x,v)),z(d));F=c.createElement(Ie,Object.assign({},D))}T=c.createElement("div",{className:`${f}-content`},y,F)}const J=h(f,{[`${f}-with-avatar`]:x,[`${f}-active`]:m,[`${f}-rtl`]:k==="rtl",[`${f}-round`]:u},i,S);return C(c.createElement("div",{className:J,style:n},_,T))}return typeof r<"u"?r:null};w.Button=$e;w.Avatar=be;w.Input=Pe;w.Image=Oe;w.Node=Se;const H=w,Me="_container_1ocrt_1",Te={container:Me},Fe=({rating:e,className:t})=>{const a=Array.from({length:5}).map((i,n)=>{let r=n+.5;return s.jsx("span",{children:e>=n+1?s.jsx("i",{className:"fa-solid fa-star"}):e>=r?s.jsx("i",{className:"fa-solid fa-star-half-stroke"}):s.jsx("i",{className:"fa-regular fa-star"})},n)});return s.jsx("div",{className:h(Te.container,t),children:a})},O=c.memo(Fe);function qe(){const{id:e}=K(),{t}=Y(),a=ne(),i=Q(),n=G(ie),{favorites:r}=G(x=>x.favorite),[l,o]=c.useState(),[d,m]=c.useState(),u=l?r.find(x=>x.book.id===l.id):void 0,p=[{name:t("productDetail.releaseDate"),value:te(l==null?void 0:l.publishedDate).format("DD/MM/YYYY")},{name:t("productDetail.numberOfPages"),value:`${l==null?void 0:l.pageNumber} ${t("productDetail.page")}`},{name:t("productDetail.bookCategory"),value:l==null?void 0:l.category.name}],k=async()=>{if(!n){a(I(!0));return}a(u?le({favoriteId:u.id}):oe({bookId:l.id}))},f=async()=>{if(!n){a(I(!0));return}a(W({bookId:l.id,quantity:1}))},C=async()=>{if(!n){a(I(!0));return}await a(W({bookId:l.id,quantity:1,buyNow:!0})),i("/user/cart")},S=()=>{const x=document.getElementById("reviews");x&&window.scrollTo({behavior:"smooth",top:x.offsetTop-120})};return c.useEffect(()=>{(async()=>{const v=await ae(e),b=await se(e);o(v.data),m(b.data)})()},[e]),{data:l,review:d,bookDetail:p,favoriteActive:u,t,handleFavorite:k,addToCart:f,buyNow:C,scrollToReview:S}}function Le(e,t=1){const a=Math.pow(10,t);return Math.floor(e*a)/a}const Ge="/bookstore-frontend/assets/no-picture-04c85a51.png",We=({data:e})=>{const{t}=Y();return s.jsxs("div",{id:"reviews",className:"mt-12 rounded-md sm:mt-0 sm:p-8 sm:shadow-md sm:m-8",children:[s.jsxs("div",{className:"flex flex-wrap gap-10 sm:gap-20",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-base font-medium mb-4",children:t("review.header")}),s.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[s.jsx("h3",{className:"text-4xl font-bold",children:Le(e.ratingAvg)||0}),s.jsx("h4",{className:"text-2xl font-bold",children:`${t("review.full")} 5 ${t("review.star")}`})]}),s.jsx(O,{rating:e.ratingAvg||0,className:"sm:text-[22px]"}),s.jsxs("p",{className:"text-base font-bold mt-2",children:[e.reviews.length||0," ",t("review.people")]})]}),s.jsx("div",{className:"flex flex-col-reverse flex-1",children:Array.from({length:5}).map((a,i)=>{var n,r;return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(O,{rating:i+1,className:"sm:text-[21px]"}),s.jsx("div",{className:"w-[25%] h-4 bg-[#F2F2F2] rounded-md overflow-hidden",children:s.jsx("div",{className:"bg-[#E9C869] h-full",style:{width:`${((n=e.ratingStar[i])==null?void 0:n.percent)||0}%`}})}),s.jsx("p",{className:"text-base font-bold",children:((r=e.ratingStar[i])==null?void 0:r.count)||0})]},i)})})]}),s.jsx("div",{className:"flex flex-col gap-10 mt-14",children:e.reviews.map(a=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("img",{className:"w-[48px] h-[48px] rounded-full",src:Ge,alt:"profile"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-base font-bold",children:a.user.firstname}),s.jsx(O,{rating:a.rating})]})]}),a.body&&s.jsx("p",{className:"text-base mt-3",children:a.body})]},a.id))})]})},Xe=c.memo(We),Ye={"product-image":"_product-image_c5vl1_1"},Ve=()=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-[56px] px-8",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(H.Image,{className:Ye["product-image"]})}),s.jsx(H,{paragraph:{rows:10}})]}),s.jsx("div",{className:"m-8 p-8",children:s.jsx(H,{paragraph:{rows:3}})})]}),Je=c.memo(Ve),Ke="_container_swuhv_1",Qe="_detail_swuhv_8",Ue="_detail__name_swuhv_36",Ze="_detail__author_swuhv_47",et="_rating_swuhv_59",tt="_price_swuhv_84",g={container:Ke,"detail-container":"_detail-container_swuhv_8","image-wrapper":"_image-wrapper_swuhv_20",detail:Qe,detail__name:Ue,detail__author:Ze,rating:et,"favourite-icon":"_favourite-icon_swuhv_69","favourite-active":"_favourite-active_swuhv_80",price:tt,"detail-discount":"_detail-discount_swuhv_91","discount-percent":"_discount-percent_swuhv_114","btn-buy-now":"_btn-buy-now_swuhv_119","btn-add-to-cart":"_btn-add-to-cart_swuhv_120","social-media":"_social-media_swuhv_154"},ft=()=>{const{data:e,review:t,favoriteActive:a,bookDetail:i,t:n,addToCart:r,buyNow:l,handleFavorite:o,scrollToReview:d}=qe();return s.jsx("div",{className:g.container,children:e&&t?s.jsxs(c.Fragment,{children:[s.jsxs("div",{className:`${g["detail-container"]} p-0 sm:px-8`,children:[s.jsx("div",{className:g["image-wrapper"],children:s.jsx("img",{src:e.image,alt:e.name,crossOrigin:"anonymous"})}),s.jsxs("div",{className:`${g.detail} sm:px-1 sm:pt-1`,children:[s.jsx("h1",{className:g.detail__name,children:e.name}),s.jsx("p",{className:g.detail__author,children:`${n("author")} : ${e.author.name}`}),s.jsxs("div",{className:"flex items-center gap-4 order-3 sm:gap-14 sm:mb-6",children:[s.jsxs("div",{className:g.rating,children:[s.jsx(O,{rating:t.ratingAvg||0,className:"sm:text-[22px]"}),s.jsx("p",{className:"underline ml-2 cursor-pointer hidden sm:block",onClick:d,children:n("productDetail.readReviews")})]}),s.jsxs("div",{className:"hidden items-center gap-2 sm:flex",onClick:o,children:[s.jsx("img",{className:h(g["favourite-icon"],{[g["favourite-active"]]:a}),src:L,alt:"favourite-icon"}),s.jsx("p",{className:"underline cursor-pointer",children:n(a?"productDetail.removeFavorites":"productDetail.addToFavorites")})]})]}),s.jsxs("div",{className:"order-[-1] mb-2 sm:order-4 sm:mb-0",children:[s.jsx("p",{className:"hidden text-2xl font-semibold mb-2 sm:block",children:n("productDetail.price")}),s.jsxs("div",{className:"relative flex flex-col sm:gap-10 sm:flex-row sm:items-end",children:[s.jsxs("p",{className:g.price,children:[s.jsx("i",{className:"fa-solid fa-baht-sign mr-3"}),e.price]}),s.jsxs("div",{className:`${g["detail-discount"]} mt-1 sm:mt-0 sm:flex-col`,children:[s.jsx("span",{className:"hidden sm:block",children:"ราคาปกติ"}),s.jsxs("p",{className:"text-xl line-through ",children:[s.jsx("i",{className:"fa-solid fa-baht-sign mr-3 sm:hidden"}),e.price]}),s.jsx("p",{className:"text-xl ml-3 sm:hidden",children:"-15%"})]}),s.jsx("p",{className:`${g["discount-percent"]} hidden sm:block`,children:"ประหยัด 0%"}),s.jsxs("div",{className:"absolute flex flex-col items-center right-[20px] top-[20%] sm:hidden",children:[s.jsx("img",{className:h(g["favourite-icon"],{[g["favourite-active"]]:a}),src:L,alt:"favourite-icon",onClick:o}),s.jsx("p",{className:"text-sm",children:n(a?"productDetail.unlike":"productDetail.like")})]})]})]}),s.jsxs("div",{className:"flex gap-4 mt-6 order-5",children:[s.jsx("button",{className:g["btn-buy-now"],type:"button",onClick:l,children:n("productDetail.buyNow")}),s.jsx("button",{className:g["btn-add-to-cart"],type:"button",onClick:r,children:n("productDetail.addToCart")})]}),s.jsxs("div",{className:g["social-media"],children:[s.jsx("p",{className:"font-semibold text-lg",children:"Share in social media :"}),s.jsx("i",{className:"fa-brands fa-facebook-f"}),s.jsx("i",{className:"fa-brands fa-twitter"}),s.jsx("i",{className:"fa-brands fa-line"})]})]})]}),s.jsxs("div",{className:"flex flex-col mt-8 sm:m-8 sm:p-8 rounded-md sm:shadow-md sm:flex-row",children:[s.jsxs("div",{className:"sm:min-w-[270px] md:min-w-[350px]",children:[s.jsx("h5",{className:"font-semibold mb-4",children:n("productDetail.bookInfo")}),s.jsx("div",{className:"flex flex-col justify-center gap-1 sm:gap-3",children:i.map((m,u)=>s.jsxs("p",{children:[s.jsx("i",{className:"fa-solid fa-chevron-right mr-4 font-bold text-purple-700"}),`${m.name} : ${m.value}`]},u))})]}),s.jsxs("div",{className:"mt-5 sm:mt-0",children:[s.jsx("h5",{className:"font-semibold mb-4",children:`${n("productDetail.productDetails")} : ${e.name}`}),s.jsx("p",{className:"leading-relaxed",children:e.description})]})]}),s.jsx(Xe,{data:t})]}):s.jsx(Je,{})})};export{ft as default};

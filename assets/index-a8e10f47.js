import{r as N,j as e}from"./index-442b5a61.js";import{c as q,a as o,u as y,F as l,o as v}from"./index-7b2945eb.js";import{Q as S}from"./react-toastify.esm-e12a846b.js";import{L as C}from"./index-13305ef7.js";import{u as F,b as w,t as E,F as M}from"./configureStore-2227f039.js";import{u as A}from"./user.service-911d9fa7.js";import{u as L}from"./useTranslation-700709b5.js";import"./index-94e514cc.js";import"./ConfirmDialog-42d31d00.js";import"./auth.service-ac0dcb3b.js";const z=()=>{var d,c,p;const{t:s}=L(),b=F(),a=w(E),f=q().shape({firstname:o().required(s("errorMessage.required.name")),lastname:o().required(s("errorMessage.required.surname")),phone:o().min(9).required(s("errorMessage.required.phone")),email:o()}),{register:t,handleSubmit:h,reset:x,formState:{errors:n,isSubmitting:g}}=y({resolver:v(f)}),j=async u=>{try{const{firstname:r,lastname:m,phone:i}=u;await A(a.id,{firstname:r,lastname:m,phone:i}),b(M({...a,firstname:r,lastname:m,phone:i})),S.success("Your profile has been updated successfully!")}catch{}};return N.useEffect(()=>{if(a){const{firstname:u,lastname:r,phone:m,email:i}=a;x({firstname:u,lastname:r,phone:m,email:i})}},[]),e.jsxs("div",{className:"rounded-md md:shadow-lg h-full md:p-4",children:[e.jsx("h1",{className:"text-lg font-medium mb-8",children:s("user.myProfile")}),e.jsxs("form",{onSubmit:h(j),children:[e.jsxs("div",{className:"grid md:grid-cols-2 md:gap-6",children:[e.jsx(l,{label:s("input.name"),labelClassName:"text-base",required:!0,...t("firstname"),error:(d=n.firstname)==null?void 0:d.message}),e.jsx(l,{label:s("input.surname"),labelClassName:"text-base",required:!0,...t("lastname"),error:(c=n.lastname)==null?void 0:c.message})]}),e.jsxs("div",{className:"grid md:grid-cols-2 md:gap-6",children:[e.jsx(l,{label:s("input.phoneNumber"),labelClassName:"text-base",required:!0,...t("phone"),error:(p=n.phone)==null?void 0:p.message}),e.jsx(l,{label:s("input.email"),labelClassName:"text-base",...t("email"),disabled:!0})]}),e.jsxs("div",{className:"flex gap-4 mt-6 mb-10",children:[e.jsx("button",{type:"submit",className:"btn-primary hover:bg-[#3d3375]",disabled:g,children:"บันทึก"}),e.jsx(C,{to:"/user/profile-password",children:e.jsx("button",{type:"button",className:"btn-secondary hover:bg-[#dfdbf4]",children:"เปลี่ยนรหัสผ่าน"})})]})]})]})};export{z as default};

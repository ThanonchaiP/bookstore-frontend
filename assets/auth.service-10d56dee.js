import{J as y,Q as $,T as H,E as Q,P as D,U as L,l as T}from"./useTranslation-ad94cc8a.js";import{u as W,a as N,C as E,M as z,P as B}from"./ConfirmDialog-246d4833.js";import{r}from"./index-eb84028e.js";const G=[],h=G;var J=globalThis&&globalThis.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(o[n[a]]=e[n[a]]);return o};let F="";function U(){return F}function v(e){const t=document.createDocumentFragment();let o=Object.assign(Object.assign({},e),{close:p,open:!0}),n;function a(){for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];const x=l.some(i=>i&&i.triggerCancel);e.onCancel&&x&&e.onCancel.apply(e,[()=>{}].concat(y(l.slice(1))));for(let i=0;i<h.length;i++)if(h[i]===p){h.splice(i,1);break}W(t)}function d(c){var{okText:l,cancelText:s,prefixCls:x}=c,i=J(c,["okText","cancelText","prefixCls"]);clearTimeout(n),n=setTimeout(()=>{const u=$(),{getPrefixCls:C,getIconPrefixCls:g}=H(),b=C(void 0,U()),O=x||`${b}-modal`,j=g();N(r.createElement(E,Object.assign({},i,{prefixCls:O,rootPrefixCls:b,iconPrefixCls:j,okText:l,locale:u,cancelText:s||u.cancelText})),t)})}function p(){for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];o=Object.assign(Object.assign({},o),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),a.apply(this,l)}}),o.visible&&delete o.visible,d(o)}function f(c){typeof c=="function"?o=c(o):o=Object.assign(Object.assign({},o),c),d(o)}return d(o),h.push(p),{destroy:p,update:f}}function M(e){return Object.assign(Object.assign({},e),{type:"warning"})}function A(e){return Object.assign(Object.assign({},e),{type:"info"})}function R(e){return Object.assign(Object.assign({},e),{type:"success"})}function k(e){return Object.assign(Object.assign({},e),{type:"error"})}function I(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Y(e){let{rootPrefixCls:t}=e;F=t}function q(){const[e,t]=r.useState([]),o=r.useCallback(n=>(t(a=>[].concat(y(a),[n])),()=>{t(a=>a.filter(d=>d!==n))}),[]);return[e,o]}const K=(e,t)=>{let{afterClose:o,config:n}=e;var a;const[d,p]=r.useState(!0),[f,c]=r.useState(n),{direction:l,getPrefixCls:s}=r.useContext(Q),x=s("modal"),i=s(),u=function(){p(!1);for(var g=arguments.length,b=new Array(g),O=0;O<g;O++)b[O]=arguments[O];const j=b.some(P=>P&&P.triggerCancel);f.onCancel&&j&&f.onCancel.apply(f,[()=>{}].concat(y(b.slice(1))))};r.useImperativeHandle(t,()=>({destroy:u,update:g=>{c(b=>Object.assign(Object.assign({},b),g))}}));const C=(a=f.okCancel)!==null&&a!==void 0?a:f.type==="confirm";return r.createElement(D,{componentName:"Modal",defaultLocale:L.Modal},g=>r.createElement(E,Object.assign({prefixCls:x,rootPrefixCls:i},f,{close:u,open:d,afterClose:o,okText:f.okText||(C?g.okText:g.justOkText),direction:l,cancelText:f.cancelText||g.cancelText})))},V=r.forwardRef(K);let w=0;const X=r.memo(r.forwardRef((e,t)=>{const[o,n]=q();return r.useImperativeHandle(t,()=>({patchElement:n}),[]),r.createElement(r.Fragment,null,o)}));function Z(){const e=r.useRef(null),[t,o]=r.useState([]);r.useEffect(()=>{t.length&&(y(t).forEach(p=>{p()}),o([]))},[t]);const n=r.useCallback(d=>function(f){var c;w+=1;const l=r.createRef();let s;const x=r.createElement(V,{key:`modal-${w}`,config:d(f),ref:l,afterClose:()=>{s==null||s()}});return s=(c=e.current)===null||c===void 0?void 0:c.patchElement(x),{destroy:()=>{function i(){var u;(u=l.current)===null||u===void 0||u.destroy()}l.current?i():o(u=>[].concat(y(u),[i]))},update:i=>{function u(){var C;(C=l.current)===null||C===void 0||C.update(i)}l.current?u():o(C=>[].concat(y(C),[u]))}}},[]);return[r.useMemo(()=>({info:n(A),success:n(R),error:n(k),warning:n(M),confirm:n(I)}),[]),r.createElement(X,{key:"modal-holder",ref:e})]}function S(e){return v(M(e))}const m=z;m.useModal=Z;m.info=function(t){return v(A(t))};m.success=function(t){return v(R(t))};m.error=function(t){return v(k(t))};m.warning=S;m.warn=S;m.confirm=function(t){return v(I(t))};m.destroyAll=function(){for(;h.length;){const t=h.pop();t&&t()}};m.config=Y;m._InternalPanelDoNotUseOrYouWillBeFired=B;const ne=m,oe=async e=>(await T.post("/auth/signin",e)).data,re=async e=>(await T.post("/auth/signup",e)).data;export{ne as M,oe as l,re as s};
